# Lines configured by zsh-newuser-install
HISTFILE=~/.histfile
HISTSIZE=5000
SAVEHIST=5000
setopt appendhistory
bindkey -e
# End of lines configured by zsh-newuser-install
# The following lines were added by compinstall
zstyle :compinstall filename '~/.zshrc'

autoload -Uz compinit
compinit
# End of lines added by compinstall


autoload -U promptinit
promptinit

# * Configuration and theme.
# ** configuration antigen
# Before, clone antigen (https://github.com/zsh-users/antigen) to the corresponding folder
source /usr/share/zsh/scripts/antigen/antigen.zsh
antigen use oh-my-zsh
# ** theme 
# Before, install patched powerline (https://github.com/powerline/powerline). Follow installation instruction on the site
if [[ $TERM == "rxvt-unicode-256color" ]]; then
  antigen theme kolo
elif [[ $TERM == "xterm" || $TERM == "xterm-256color" ]]; then
  antigen theme agnoster
else
  antigen theme kolo
fi

#Alias
alias nano='nano -w'


# * Zsh-Highlight
#antigen bundle zsh-users/zsh-syntax-highlighting
# Extremely slow...

# ** prefix prompt
DEFAULT_USER=$USER
export DEFAULT_USER
EDITOR="nano"
export EDITOR

# * Plugins
antigen bundles <<EOBUNDLES
    # Git and github autocompletions and aliases
    git
    git-extras
    #docker

    # Extras
    command-not-found
    sudo
    systemd
EOBUNDLES

# * Completions
# Additional completion definitions for Zsh.
antigen bundle zsh-users/zsh-completions src
# Enable completion for new installed command within the session by
# not trust the zsh's cache of executable command, and forced it be
# updated
zstyle ":completion:*:commands" rehash 1

## Keybinding
autoload zkbd
# may be different - check where zkbd saved the configuration:
if [ -f ~/.zkbd/$TERM-:0 ]
then
    source ~/.zkbd/$TERM-:0 
else
    typeset -A key
    key[Home]=${terminfo[khome]}
    key[End]=${terminfo[kend]}
    key[Insert]=${terminfo[kich1]}
    key[Delete]=${terminfo[kdch1]}
    key[Up]=${terminfo[kcuu1]}
    key[Down]=${terminfo[kcud1]}
    key[Left]=${terminfo[kcub1]}
    key[Right]=${terminfo[kcuf1]}
    key[PageUp]=${terminfo[kpp]}
    key[PageDown]=${terminfo[knp]}
fi

key[Up]=${terminfo[kcuu1]}
key[Down]=${terminfo[kcud1]}
autoload -U up-line-or-beginning-search
autoload -U down-line-or-beginning-search
zle -N up-line-or-beginning-search
zle -N down-line-or-beginning-search

[[ -n ${key[Backspace]} ]] && bindkey "${key[Backspace]}" backward-delete-char
[[ -n ${key[Insert]} ]] && bindkey "${key[Insert]}" overwrite-mode
[[ -n ${key[Home]} ]] && bindkey "${key[Home]}" beginning-of-line
[[ -n ${key[PageUp]} ]] && bindkey "${key[PageUp]}" up-line-or-history
[[ -n ${key[Delete]} ]] && bindkey "${key[Delete]}" delete-char
[[ -n ${key[End]} ]] && bindkey "${key[End]}" end-of-line
[[ -n ${key[PageDown]} ]] && bindkey "${key[PageDown]}" down-line-or-history
[[ -n ${key[Left]} ]] && bindkey "${key[Left]}" backward-char
[[ -n ${key[Right]} ]] && bindkey "${key[Right]}" forward-char
[[ -n ${key[Up]} ]] && bindkey "${key[Up]}" up-line-or-beginning-search
[[ -n ${key[Down]} ]] && bindkey "${key[Down]}" down-line-or-beginning-search
